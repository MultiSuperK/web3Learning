# solidity 编解码

### abi.encode&abi.decode

```solidity
pragma solidity ^0.8.11;


contract AbiDecode{


    struct MyStruct{
        string name;
        uint age;
        uint[2] attrs;
    }

    function encode(
        address _addr, 
        uint _u,
        uint[] calldata _u_arr,
        MyStruct calldata _struct)
    external pure 
    returns(bytes memory)
    {
        return abi.encode(_addr, _u, _u_arr, _struct);

    }

    function decode(bytes calldata data) 
    external pure 
    returns(address _addr, uint _u, uint[] memory _u_arr, MyStruct memory _struct)
    {
        (_addr, _u, _u_arr, _struct) = abi.decode(data, (address, uint, uint[], MyStruct));
    }
}
```



### 测试用例:

#### remix测试encode方法

```solidity
输入：
0x5B38Da6a701c568545dCfcB03FcB875f56beddC4, 
11,
[1,2],
["abc", 18, [1,2]]
输出:
0x0000000000000000000000005b38da6a701c568545dcfcb03fcb875f56beddc4000000000000000000000000000000000000000000000000000000000000000b000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000e0000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000120000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000006162630000000000000000000000000000000000000000000000000000000000
```

#### remix测试decode方法

```solidity
输入:
0x0000000000000000000000005b38da6a701c568545dcfcb03fcb875f56beddc4000000000000000000000000000000000000000000000000000000000000000b000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000e0000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000120000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000006162630000000000000000000000000000000000000000000000000000000000
输出:
0:
address: _addr 0x5B38Da6a701c568545dCfcB03FcB875f56beddC4
1:
uint256: _u 11
2:
uint256[]: _u_arr 1,2
3:
tuple(string,uint256,uint256[2]): _struct ,18,1,2
```

#### 测试成功